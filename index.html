<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catch the Ball</title>
  <style>
    body {
      margin: 0;
      background: #000;
      overflow: hidden;
    }
    canvas {
      display: block;
      background: #111;
      margin: 0 auto;
    }
    .controls {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 20px;
    }
    .arrow {
      width: 60px;
      height: 60px;
      font-size: 30px;
      background: #fff;
      border-radius: 50%;
      border: none;
      opacity: 0.7;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<div class="controls">
  <button class="arrow" id="leftBtn">⬅</button>
  <button class="arrow" id="rightBtn">➡</button>
</div>

<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  let paddleWidth = 80;
  let paddleHeight = 15;
  let paddleX = (canvas.width - paddleWidth) / 2;
  let paddleY = canvas.height - 30;
  let paddleSpeed = 5;

  let ballX = Math.random() * (canvas.width - 20);
  let ballY = 0;
  let ballSize = 20;
  let ballSpeed = 4;

  let score = 0;
  let gameOver = false;

  let moveLeft = false;
  let moveRight = false;

  function drawPaddle() {
    ctx.fillStyle = "#0f0";
    ctx.fillRect(paddleX, paddleY, paddleWidth, paddleHeight);
  }

  function drawBall() {
    ctx.beginPath();
    ctx.arc(ballX, ballY, ballSize / 2, 0, Math.PI * 2);
    ctx.fillStyle = "#f00";
    ctx.fill();
    ctx.closePath();
  }

  function drawScore() {
    ctx.font = "20px Arial";
    ctx.fillStyle = "#fff";
    ctx.fillText("Score: " + score, 10, 30);
  }

  function drawGameOver() {
    ctx.font = "40px Arial";
    ctx.fillStyle = "#fff";
    ctx.textAlign = "center";
    ctx.fillText("Game Over", canvas.width / 2, canvas.height / 2);
    ctx.font = "20px Arial";
    ctx.fillText("Tap to Retry", canvas.width / 2, canvas.height / 2 + 40);
  }

  function resetGame() {
    ballX = Math.random() * (canvas.width - 20);
    ballY = 0;
    score = 0;
    gameOver = false;
  }

  function updateGame() {
    if (gameOver) return;

    // Ball movement
    ballY += ballSpeed;

    // Paddle movement
    if (moveLeft) {
      paddleX -= paddleSpeed;
      if (paddleX < 0) paddleX = 0;
    }
    if (moveRight) {
      paddleX += paddleSpeed;
      if (paddleX + paddleWidth > canvas.width) paddleX = canvas.width - paddleWidth;
    }

    // Catching the ball
    if (
      ballY + ballSize >= paddleY &&
      ballX + ballSize > paddleX &&
      ballX < paddleX + paddleWidth
    ) {
      score++;
      ballY = 0;
      ballX = Math.random() * (canvas.width - 20);
    }

    // Missed the ball
    if (ballY > canvas.height) {
      gameOver = true;
    }
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPaddle();
    drawBall();
    drawScore();
    if (gameOver) drawGameOver();
  }

  function gameLoop() {
    updateGame();
    draw();
    requestAnimationFrame(gameLoop);
  }

  // Keyboard controls
  document.addEventListener("keydown", function (e) {
    if (e.key === "ArrowLeft") moveLeft = true;
    if (e.key === "ArrowRight") moveRight = true;
    if (gameOver) resetGame();
  });

  document.addEventListener("keyup", function (e) {
    if (e.key === "ArrowLeft") moveLeft = false;
    if (e.key === "ArrowRight") moveRight = false;
  });

  // Mobile buttons
  const leftBtn = document.getElementById("leftBtn");
  const rightBtn = document.getElementById("rightBtn");

  leftBtn.addEventListener("touchstart", () => (moveLeft = true));
  leftBtn.addEventListener("touchend", () => (moveLeft = false));

  rightBtn.addEventListener("touchstart", () => (moveRight = true));
  rightBtn.addEventListener("touchend", () => (moveRight = false));

  canvas.addEventListener("touchstart", () => {
    if (gameOver) resetGame();
  });

  gameLoop();
</script>
</body>
</html>